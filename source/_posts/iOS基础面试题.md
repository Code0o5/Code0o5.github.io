---
title: iOS基础面试题
copyright: true
date: 2021-07-12 14:51:10
categories: [iOS, OC, 面试题]
tags: [OC, 面试题]
---



## 1. OC内存管理机制是什么？

- 答案

  >Objective-C 是通过一种"referring counting"(引用计数)的方式来管理内存的, 对象在开始分配内存(alloc)的时候引用计数为一,以后每当碰到有copy,retain的时候引用计数都会加一, 每当碰到release和autorelease的时候引用计数就会减一,如果此对象的计数变为了0, 就会被系统销毁。



***

## 2. iOS自动释放池是什么,如何工作 ？

- 答案

  >当您向一个对象发送一个autorelease消息时，Cocoa就会将该对象的一个引用放入到最新的自动释放池。它仍然是个正当的对象，因此自动释放池定义的作用域内的其它对象可以向它发送消息。当程序执行到作用域结束的位置时，自动释放池就会被释放，池中的所有对象也就被释放。

- 说明

  > NSAutoreleasePool 是用来做引用计数的管理工作的,这个东西一般不用你管的.
  >
  > autorelease和release没什么区别,只是引用计数减一的时机不同而已,autorelease会在对象的使用真正结束的时候才做引用计数减一.





***

## 3. `UIButton`对其`target`是否会产生循环引用

- 答案

  >不会。
  >
  >在`iOS`的`Target-Action`模式中, `UIControl`(如`UIButton`)对其`target`的持有方式是`weakRetained`的方式, 因此不会存在循环引用.
  >
  >而`NSTimer`对其`target`持有的方式是`autorelease`方式, 即`target`会在其指定的`runloop`下一次执行时查看是否进行释放. 若`repeats`参数为`YES`, 则`timer`未释放情况下, `target`不会释放, 因而会引起循环引用; 若`repeats`参数设置为`NO`, 则`target`可以被释放而不会存在循环引用.

  

***

## 3. iOS类别的作用？继承和类别在实现中有何区别？

- 答案

  >category 可以在不获悉，不改变原来代码的情况下往里面添加新的方法，只能添加，不能删除修改。 并且如果类别和原来类中的方法产生名称冲突，则类别将覆盖原来的方法，因为类别具有更高的优先级。
  >
  >继承可以增加，修改或者删除方法，并且可以增加属性。

- 类别主要有3个作用：

  1. 将类的实现分散到多个不同文件或多个不同框架中。
  2. 声明私有方法，某一个方法只实现，不声明，相当于私有方法。
  3. 向对象添加非正式协议。（非正式协议也就是类别）



***

## 4. 从输入url到页面展示到底发生了什么

- 答案

  > 1. 输入地址
  > 2. 浏览器查找域名的 IP 地址　
  > 3. 浏览器向 web 服务器发送一个 HTTP 请求
  > 4. 服务器的永久重定向响应
  > 5. 浏览器跟踪重定向地址
  > 6. 服务器处理请求
  > 7. 服务器返回一个 HTTP 响应
  > 8. 浏览器显示 HTML
  > 9. 浏览器发送请求获取嵌入在 HTML 中的资源（如图片、音频、视频、CSS、JS等等）





***

## 5. iOS中持久化方式有哪些？

- 答案

  > 1. 属性列表文件`NSUserDefaults`的存储：实际是本地生成一个`plist`文件，将所需属性存储在`plist`文件中
  > 2. 对象归档：本地创建文件并写入数据，文件类型不限
  > 3. SQLite 数据库：本地创建数据库文件，进行数据处理
  > 4. CoreData：同数据库处理思想相同，但实现方式不同



***

## 6. 你在开发过程中常用到哪些定时器，定时器时间会有误差吗，如果有，为什么会有误差？

- 答案

  > iOS中常用的定时器有`NSTimer`、`CADisplayLink`、`GCD定时器`，其中`NSTimer`、`CADisplayLink`基于`NSRunLoop`实现，故存在误差，`GCD定时器`只依赖系统内核，相对一前两者是比较准时的。

  > 误差原因是：与`NSRunLoop`机制有关， 因为`RunLoop`每跑完一次圈再去检查当前累计时间是否已经达到定时设置的间隔时间，如果未达到，RunLoop将进入下一轮任务，待任务结束之后再去检查当前累计时间，而此时的累计时间可能已经超过了定时器的间隔时间，故会存在误差。



***

## 7. 怎样防止指针的越界使用问题?

- 答案

  > 必须让指针指向一个有效的内存地址
  >
  > 1. 防止数组越界
  > 2. 防止向一块内存中拷贝过多的内容
  > 3. 防止使用空指针
  > 4. 防止改变const修改的指针
  > 5. 防止改变指向静态存储区的内容
  > 6. 防止两次释放一个指针
  > 7. 防止使用野指针.



***

## 8. iOS你在项目中用过 runtime 吗？举个例子

- 答案

  > Objective-C 语言是一门动态语言，编译器不需要关心接受消息的对象是何种类型，接收消息的对象问题也要在运行时处理。

  > pragramming 层面的 runtime 主要体现在以下几个方面：
  >
  > 1. 关联对象 Associated Objects
  > 2. 消息发送 Messaging
  > 3. 消息转发 Message Forwarding
  > 4. 方法调配 Method Swizzling
  > 5. “类对象” NSProxy Foundation | Apple Developer Documentation
  > 6. KVC、KVO About Key-Value Coding

